"use strict";(self.webpackJsonp=self.webpackJsonp||[]).push([[8188],{"8188":function(A){A.exports=JSON.parse('{"version":3,"sources":["src/components/view/style/index.scss?tag=taro-view-core","src/components/view/view.tsx"],"names":["indexCss","View","this","startTime","prototype","onTouchStart","_this","hoverClass","touch","setTimeout","hover","hoverStartTime","timeoutEvent","onLongPress","emit","Date","now","onTouchMove","clearTimeout","onTouchEnd","spanTime","hoverStayTime","componentDidRender","el","childNodes","forEach","item","nodeType","document","COMMENT_NODE","render","cls","classNames","_a","concat","attr","animation","h","Host","Object","assign","class"],"mappings":"qJAAA,IAAMA,SAAW,gLCOJC,KAAI,mGAePC,KAAAC,UAAY,yEAVK,sBACD,eACP,iBACA,MAUjBF,EAAAG,UAAAC,aAAA,WAAA,IAAAC,EAAAJ,KACE,GAAIA,KAAKK,WAAY,CACnBL,KAAKM,MAAQ,KACbC,YAAW,WACT,GAAIH,EAAKE,MAAO,CACdF,EAAKI,MAAQ,QAEdR,KAAKS,gBAGVT,KAAKU,aAAeH,YAAW,WAC7BH,EAAKO,YAAYC,SAChB,KACHZ,KAAKC,UAAYY,KAAKC,OAIxBf,EAAAG,UAAAa,YAAA,WACEC,aAAahB,KAAKU,eAIpBX,EAAAG,UAAAe,WAAA,WAAA,IAAAb,EAAAJ,KACE,IAAMkB,EAAWL,KAAKC,MAAQd,KAAKC,UACnC,GAAIiB,EAAW,IAAK,CAClBF,aAAahB,KAAKU,cAEpB,GAAIV,KAAKK,WAAY,CACnBL,KAAKM,MAAQ,MACbC,YAAW,WACT,IAAKH,EAAKE,MAAO,CACfF,EAAKI,MAAQ,SAEdR,KAAKmB,iBAIZpB,EAAAG,UAAAkB,mBAAA,WACE,IAAMC,EAAKrB,KAAKqB,GAChBA,EAAGC,WAAWC,SAAQ,SAAAC,GAEpB,GAAIA,EAAKC,WAAaC,SAASC,cAAgBH,EAAK,QAASA,EAAK,QAAU,MAE5E,GAAIA,EAAKC,WAAaC,SAASC,cAAgBH,EAAK,QAASA,EAAK,QAAU,UAIhFzB,EAAAG,UAAA0B,OAAA,iBACE,IAAMC,EAAMC,YAAUC,EAAA,GACpBA,EAAC,GAAAC,OAAGhC,KAAKK,aAAeL,KAAKQ,UAE/B,IAAIyB,EAAO,GACX,KAAMjC,KAAKkC,UAAW,CACpBD,EAAK,aAAejC,KAAKkC,UACzBD,EAAK,kBAAoBjC,KAAKkC,UAEhC,OACEC,EAACC,KAAIC,OAAAC,OAAA,CAACC,MAAOV,GAASI,GACpBE,EAAA,OAAA,sIA5ES","sourcesContent":["body,\\nhtml {\\n  user-select: none;\\n  -webkit-tap-highlight-color: rgb(0 0 0 / 0%);\\n}\\n\\ntaro-view-core {\\n  display: block;\\n}\\n","import { Component, Prop, h, ComponentInterface, Host, Listen, State, Event, EventEmitter, Element } from \'@stencil/core\'\\nimport classNames from \'classnames\'\\n\\n@Component({\\n  tag: \'taro-view-core\',\\n  styleUrl: \'./style/index.scss\'\\n})\\nexport class View implements ComponentInterface {\\n  @Element() el: HTMLElement\\n\\n  @Prop() animation: string\\n  @Prop() hoverClass: string\\n  @Prop() hoverStartTime = 50\\n  @Prop() hoverStayTime = 400\\n  @State() hover = false\\n  @State() touch = false\\n\\n  @Event({\\n    eventName: \'longpress\'\\n  }) onLongPress: EventEmitter\\n\\n  private timeoutEvent: ReturnType<typeof setTimeout>\\n  private startTime = 0\\n\\n  @Listen(\'touchstart\')\\n  onTouchStart () {\\n    if (this.hoverClass) {\\n      this.touch = true\\n      setTimeout(() => {\\n        if (this.touch) {\\n          this.hover = true\\n        }\\n      }, this.hoverStartTime)\\n    }\\n\\n    this.timeoutEvent = setTimeout(() => {\\n      this.onLongPress.emit()\\n    }, 350)\\n    this.startTime = Date.now()\\n  }\\n\\n  @Listen(\'touchmove\')\\n  onTouchMove () {\\n    clearTimeout(this.timeoutEvent)\\n  }\\n\\n  @Listen(\'touchend\')\\n  onTouchEnd () {\\n    const spanTime = Date.now() - this.startTime\\n    if (spanTime < 350) {\\n      clearTimeout(this.timeoutEvent)\\n    }\\n    if (this.hoverClass) {\\n      this.touch = false\\n      setTimeout(() => {\\n        if (!this.touch) {\\n          this.hover = false\\n        }\\n      }, this.hoverStayTime)\\n    }\\n  }\\n\\n  componentDidRender () {\\n    const el = this.el\\n    el.childNodes.forEach(item => {\\n      // Note: [\'s-cn\'] Content Reference Node\\n      if (item.nodeType === document.COMMENT_NODE && item[\'s-cn\']) item[\'s-cn\'] = false\\n      // Note: [\'s-sr\'] Is a slot reference node (渲染完成后禁用 slotRelocation 特性, 避免 Stencil 组件相互调用时内置排序与第三方 UI 框架冲突导致组件顺序混乱)\\n      if (item.nodeType !== document.COMMENT_NODE && item[\'s-sr\']) item[\'s-sr\'] = false\\n    })\\n  }\\n\\n  render() {\\n    const cls = classNames({\\n      [`${this.hoverClass}`]: this.hover\\n    })\\n    let attr = {}\\n    if (!!this.animation) {\\n      attr[\'animation\'] = this.animation\\n      attr[\'data-animation\'] = this.animation\\n    }\\n    return (\\n      <Host class={cls} {...attr}>\\n        <slot></slot>\\n      </Host>\\n    )\\n  }\\n}\\n"]}')}}]);